<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本宗教：共生与融合的智慧</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font for Japanese/Chinese aesthetic */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fdfbf7; /* Warm off-white, paper-like */
            color: #2d3748;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Chart Container Styling - Critical Requirement */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width to prevent stretching */
            height: 350px; /* Base height */
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Interactive Elements */
        .nav-btn {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-btn.active {
            color: #b91c1c; /* Red-700 */
            border-bottom-color: #b91c1c;
        }
        
        .timeline-node {
            transition: transform 0.2s;
            cursor: pointer;
        }
        .timeline-node:hover {
            transform: scale(1.1);
        }

        .lifecycle-card {
            transition: all 0.3s ease;
        }
        .lifecycle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Custom Scrollbar for text areas */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }
    </style>
    <!-- Chosen Palette: "Zen Harmony" - Warm Background (#fdfbf7), Deep Charcoal Text (#2d3748), Vermilion Accents (#b91c1c for Shinto), Matcha Green (#4d7c0f for Buddhism), Indigo (#312e81 for History/Formal) -->
    <!-- Application Structure Plan:
        1. Hero Section: Sets the tone of "Harmony" and defines the core concept of Shinbutsu-shugo.
        2. The Data Paradox (Interactive Dashboard): Immediately addresses the "more believers than people" phenomenon using charts. This hooks the user with a quantitative mystery.
        3. Historical Flow (Vertical Timeline): Explains *how* this happened chronologically. Users select eras to see the evolution of syncretism.
        4. The Life Cycle (Interactive Journey): Shows the practical application. "Born Shinto, Die Buddhist". User toggles through life stages.
        5. Localization Matrix (Grid): Deep dive into specific examples of how foreign religions (Buddhism, Christianity) were adapted.
        6. Cultural Calendar (Grid/Hover): Shows the seasonal rhythm of mixed practices.
    -->
    <!-- Visualization & Content Choices:
        1. Intro -> Goal: Definition -> Text + Unicode Icons -> Simple visual anchoring.
        2. Demographics -> Goal: Compare -> Bar Chart (Chart.js) -> Compare Total Pop vs Religious stats (sum > 100%) to prove syncretism visually.
        3. Influence Radar -> Goal: Analyze -> Radar Chart (Chart.js) -> Shows which religion dominates which aspect of life (e.g., Death=Buddhism, Celebration=Shinto).
        4. History -> Goal: Timeline -> CSS/HTML List + JS Selection -> Text updates dynamically. No complex libraries needed.
        5. Life Cycle -> Goal: Process -> Flex Cards + JS Hover/Click -> Interactive discovery of rituals.
        6. Localization -> Goal: Details -> Filterable Grid -> JS filtering for Buddhism/Christianity/Confucianism.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-[#fdfbf7]/95 backdrop-blur-sm border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl mr-2">⛩️</span>
                    <h1 class="text-xl font-bold text-gray-800 tracking-wide serif">日本宗教研究</h1>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="scrollToSection('data-section')" class="nav-btn text-gray-600 hover:text-red-700 px-3 py-2 text-sm font-medium">数据悖论</button>
                    <button onclick="scrollToSection('history-section')" class="nav-btn text-gray-600 hover:text-red-700 px-3 py-2 text-sm font-medium">历史融合</button>
                    <button onclick="scrollToSection('lifecycle-section')" class="nav-btn text-gray-600 hover:text-red-700 px-3 py-2 text-sm font-medium">人生仪礼</button>
                    <button onclick="scrollToSection('localization-section')" class="nav-btn text-gray-600 hover:text-red-700 px-3 py-2 text-sm font-medium">本土化</button>
                </div>
                <!-- Mobile menu button stub -->
                <div class="md:hidden flex items-center">
                    <button class="text-gray-500 hover:text-gray-700 focus:outline-none">
                        <span class="text-xl">☰</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-white">
        <div class="max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl sm:tracking-tight lg:text-6xl serif mb-4">
                和の宗教观：神佛习合
            </h1>
            <p class="max-w-2xl mx-auto text-xl text-gray-500 serif">
                探索日本独特的“多层信仰结构”。在这里，外来宗教并未取代本土信仰，而是与其融合，形成了一种宽容而务实的精神世界。
            </p>
            <div class="mt-8 flex justify-center space-x-8">
                <div class="text-center">
                    <div class="text-3xl">⛩️</div>
                    <div class="text-sm text-gray-500 mt-1">神道 (Shinto)</div>
                    <div class="text-xs text-red-600 font-bold">现世 · 洁净</div>
                </div>
                <div class="text-2xl text-gray-300 self-center">+</div>
                <div class="text-center">
                    <div class="text-3xl">☸️</div>
                    <div class="text-sm text-gray-500 mt-1">佛教 (Buddhism)</div>
                    <div class="text-xs text-green-700 font-bold">来世 · 救赎</div>
                </div>
                <div class="text-2xl text-gray-300 self-center">+</div>
                <div class="text-center">
                    <div class="text-3xl">📜</div>
                    <div class="text-sm text-gray-500 mt-1">儒教 (Confucianism)</div>
                    <div class="text-xs text-blue-700 font-bold">社会 · 伦理</div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-24 pb-20">

        <!-- SECTION 1: DATA PARADOX -->
        <section id="data-section" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl serif">
                    数据的悖论：1 + 1 > 2
                </h2>
                <p class="mt-4 max-w-2xl text-xl text-gray-500 mx-auto">
                    如果统计日本各宗教的信徒人数，总和往往超过日本总人口。这揭示了日本宗教的核心特征：<span class="font-bold text-gray-800">非排他性的归属感</span>。
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <!-- Chart 1: Population vs Believers -->
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 text-center">宗教信徒统计 vs 日本总人口 (百万人)</h3>
                    <div class="chart-container">
                        <canvas id="populationChart"></canvas>
                    </div>
                    <p class="text-sm text-gray-500 mt-4 text-center italic">数据来源：日本文化厅《宗教年鉴》</p>
                </div>

                <!-- Text Context -->
                <div class="space-y-6">
                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                        <h4 class="text-lg font-bold text-red-800 mb-2">多重归属 (Multiple Belonging)</h4>
                        <p class="text-gray-700">
                            大多数日本人不认为自己属于单一宗教。一个人可以同时在出生时接受神道教祝福，婚礼在教堂举行，葬礼则采用佛教仪式。这种现象被称为“功能分化”。
                        </p>
                    </div>
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-600">
                        <h4 class="text-lg font-bold text-green-800 mb-2">仪式而非教义</h4>
                        <p class="text-gray-700">
                            对于现代日本人，宗教更多是一种<span class="font-bold">习惯和仪式</span>，而非严格的教义信仰。参与节日（祭典）是社区活动，而非单纯的宗教崇拜。
                        </p>
                    </div>
                    
                    <!-- Interactive Toggle for Radar Chart -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <h4 class="font-bold text-gray-700 mb-3 text-center">生活领域中的影响力分布</h4>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="radarChart"></canvas>
                        </div>
                        <div class="flex justify-center space-x-4 mt-2 text-xs">
                            <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-red-500 mr-1"></span>神道 (现世/庆典)</span>
                            <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-green-600 mr-1"></span>佛教 (死后/精神)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: HISTORICAL TIMELINE -->
        <section id="history-section" class="scroll-mt-20 bg-gray-50 rounded-3xl p-8 lg:p-12">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-extrabold text-gray-900 serif">历史的融合：神佛习合的演变</h2>
                <p class="mt-4 text-gray-500">
                    点击下方的时间节点，了解外来宗教如何一步步“本土化”并与原有信仰共生。
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
                <!-- Timeline Navigation (Left) -->
                <div class="md:col-span-4 space-y-2">
                    <button onclick="updateHistory('ancient')" id="btn-ancient" class="w-full text-left p-4 rounded-lg bg-white shadow-sm hover:bg-red-50 border-l-4 border-red-500 transition-all timeline-active">
                        <div class="font-bold text-gray-800">6世纪：佛教传入</div>
                        <div class="text-sm text-gray-500">冲突与初次妥协</div>
                    </button>
                    <button onclick="updateHistory('heian')" id="btn-heian" class="w-full text-left p-4 rounded-lg bg-white shadow-sm hover:bg-red-50 border-l-4 border-transparent transition-all">
                        <div class="font-bold text-gray-800">平安时代 (8-12世纪)</div>
                        <div class="text-sm text-gray-500">本地垂迹说：神即是佛</div>
                    </button>
                    <button onclick="updateHistory('edo')" id="btn-edo" class="w-full text-left p-4 rounded-lg bg-white shadow-sm hover:bg-red-50 border-l-4 border-transparent transition-all">
                        <div class="font-bold text-gray-800">江户时代 (17-19世纪)</div>
                        <div class="text-sm text-gray-500">檀家制度与基督教禁令</div>
                    </button>
                    <button onclick="updateHistory('meiji')" id="btn-meiji" class="w-full text-left p-4 rounded-lg bg-white shadow-sm hover:bg-red-50 border-l-4 border-transparent transition-all">
                        <div class="font-bold text-gray-800">明治维新 (1868)</div>
                        <div class="text-sm text-gray-500">神佛分离令：强行拆解</div>
                    </button>
                    <button onclick="updateHistory('modern')" id="btn-modern" class="w-full text-left p-4 rounded-lg bg-white shadow-sm hover:bg-red-50 border-l-4 border-transparent transition-all">
                        <div class="font-bold text-gray-800">现代</div>
                        <div class="text-sm text-gray-500">精神自由与新兴宗教</div>
                    </button>
                </div>

                <!-- Content Display (Right) -->
                <div class="md:col-span-8 bg-white p-8 rounded-xl shadow-md min-h-[400px] flex flex-col justify-center relative overflow-hidden">
                    <div id="history-content">
                        <!-- Content injected via JS -->
                    </div>
                    <!-- Decorative background element -->
                    <div class="absolute top-0 right-0 opacity-5 text-9xl pointer-events-none select-none">
                        ☸️
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: LIFE CYCLE -->
        <section id="lifecycle-section" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-extrabold text-gray-900 serif">人生仪礼：生于神道，死于佛教</h2>
                <p class="mt-4 text-gray-500">
                    日本人的一生如同在不同的宗教世界中穿梭。这种功能性的分工解决了不同的心理需求。
                </p>
            </div>

            <!-- Life Journey Interactive Visualization -->
            <div class="relative">
                <!-- Progress Line -->
                <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 transform -translate-y-1/2 hidden md:block"></div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <!-- Birth -->
                    <div class="lifecycle-card bg-white p-6 rounded-xl shadow-lg border-t-4 border-red-500 text-center cursor-pointer group" onclick="showLifeDetail('birth')">
                        <div class="text-4xl mb-3 group-hover:scale-110 transition-transform">👶</div>
                        <h3 class="text-lg font-bold text-gray-800">出生 & 七五三</h3>
                        <p class="text-sm text-red-600 font-semibold mt-1">领域：神道</p>
                        <p class="text-xs text-gray-500 mt-2">祈求成长与洁净</p>
                    </div>

                    <!-- Wedding -->
                    <div class="lifecycle-card bg-white p-6 rounded-xl shadow-lg border-t-4 border-blue-400 text-center cursor-pointer group" onclick="showLifeDetail('wedding')">
                        <div class="text-4xl mb-3 group-hover:scale-110 transition-transform">💍</div>
                        <h3 class="text-lg font-bold text-gray-800">婚礼</h3>
                        <p class="text-sm text-blue-600 font-semibold mt-1">领域：基督教/神道</p>
                        <p class="text-xs text-gray-500 mt-2">浪漫与誓约</p>
                    </div>

                    <!-- Daily Life -->
                    <div class="lifecycle-card bg-white p-6 rounded-xl shadow-lg border-t-4 border-yellow-500 text-center cursor-pointer group" onclick="showLifeDetail('daily')">
                        <div class="text-4xl mb-3 group-hover:scale-110 transition-transform">📅</div>
                        <h3 class="text-lg font-bold text-gray-800">年中行事</h3>
                        <p class="text-sm text-yellow-600 font-semibold mt-1">领域：混合</p>
                        <p class="text-xs text-gray-500 mt-2">正月、盂兰盆节、圣诞</p>
                    </div>

                    <!-- Death -->
                    <div class="lifecycle-card bg-white p-6 rounded-xl shadow-lg border-t-4 border-gray-600 text-center cursor-pointer group" onclick="showLifeDetail('death')">
                        <div class="text-4xl mb-3 group-hover:scale-110 transition-transform">🪷</div>
                        <h3 class="text-lg font-bold text-gray-800">葬礼 & 祭祖</h3>
                        <p class="text-sm text-green-700 font-semibold mt-1">领域：佛教</p>
                        <p class="text-xs text-gray-500 mt-2">往生与祖先崇拜</p>
                    </div>
                </div>

                <!-- Detail View Panel -->
                <div id="life-detail-panel" class="mt-8 bg-white rounded-xl shadow-inner p-8 border border-gray-200 min-h-[200px] flex items-center justify-center transition-all">
                    <div class="text-center text-gray-400">
                        <p>点击上方卡片查看详细解读</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: LOCALIZATION MATRIX -->
        <section id="localization-section" class="scroll-mt-20">
            <div class="mb-10">
                <h2 class="text-3xl font-extrabold text-gray-900 serif">本土化的艺术：外来宗教的变容</h2>
                <p class="mt-4 text-gray-500">
                    日本文化具有强大的“语境化”能力。任何外来宗教进入日本后，都会为了适应本土的自然观和社会结构而发生改变。
                </p>
            </div>

            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-gray-200">
                    
                    <!-- Buddhism Column -->
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex items-center mb-4">
                            <span class="text-2xl mr-2">☸️</span>
                            <h3 class="text-xl font-bold text-gray-800">佛教 (Buddhism)</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">主要变容</h4>
                                <p class="text-gray-800 mt-1">从“出世”到“入世”。强调为国家祈福（镇护国家）和为祖先供养。</p>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">独特派别</h4>
                                <p class="text-gray-800 mt-1"><span class="font-bold text-green-700">净土真宗</span>：允许僧侣结婚吃肉，极其平民化。</p>
                                <p class="text-gray-800 mt-1"><span class="font-bold text-green-700">禅宗</span>：与武士道结合，影响了茶道、花道等审美。</p>
                            </div>
                            <div class="text-sm bg-green-50 p-3 rounded text-green-800">
                                💡 <strong>核心：</strong> 佛教承担了原本神道教无法处理的“死亡与秽”的问题。
                            </div>
                        </div>
                    </div>

                    <!-- Christianity Column -->
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex items-center mb-4">
                            <span class="text-2xl mr-2">✝️</span>
                            <h3 class="text-xl font-bold text-gray-800">基督教 (Christianity)</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">主要变容</h4>
                                <p class="text-gray-800 mt-1">作为“文化符号”而非纯粹信仰。主要体现在婚礼形式、教育机构和慈善活动。</p>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">历史适应</h4>
                                <p class="text-gray-800 mt-1"><span class="font-bold text-blue-700">隐匿基督徒</span>：在禁教时期，将玛利亚伪装成观音像（玛利亚观音），体现了极致的混合。</p>
                            </div>
                            <div class="text-sm bg-blue-50 p-3 rounded text-blue-800">
                                💡 <strong>核心：</strong> 剥离了严格的一神论排他性，保留了爱与慈善的形象。
                            </div>
                        </div>
                    </div>

                    <!-- Confucianism Column -->
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex items-center mb-4">
                            <span class="text-2xl mr-2">📜</span>
                            <h3 class="text-xl font-bold text-gray-800">儒教 (Confucianism)</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">主要变容</h4>
                                <p class="text-gray-800 mt-1">未成为独立宗教，而是内化为道德规范。强调“忠”（对君主/集体）甚于“孝”（对家族）。</p>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase">社会影响</h4>
                                <p class="text-gray-800 mt-1">构成了日本企业的年功序列、等级制度和集体主义精神的基石。</p>
                            </div>
                            <div class="text-sm bg-yellow-50 p-3 rounded text-yellow-800">
                                💡 <strong>核心：</strong> 提供了社会运作的伦理软件，而神佛提供了精神硬件。
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-2xl font-bold serif mb-4">结语：宽容的共存</h2>
            <p class="max-w-2xl mx-auto text-gray-400">
                日本宗教的特点不在于教义的纯粹，而在于对“和谐”（和）的追求。
                神道教关注现世的洁净与生命力，佛教关注死后的安宁与解脱，儒教维持社会的秩序。
                这种分工合作，构成了日本人独特的精神家园。
            </p>
            <div class="mt-8 text-sm text-gray-500">
                Created for Educational Visualization
            </div>
        </div>
    </footer>

    <script>
        // --- Data & State ---
        const historyData = {
            ancient: {
                title: "6世纪：佛教传入与初次冲突",
                color: "text-red-700",
                content: `
                    <p class="mb-4"><strong>关键事件：</strong> 公元538年（或552年），百济圣明王向日本钦明天皇进献佛像与经论。</p>
                    <p class="mb-4"><strong>反应：</strong> 引起了崇佛派（苏我氏）与排佛派（物部氏）的激烈政治斗争。此时佛教被视为一种先进的“外国科技”和护国法术。</p>
                    <p><strong>融合萌芽：</strong> 圣德太子制定《十七条宪法》，同时尊崇佛法与神道，提出“和为贵”。</p>
                `
            },
            heian: {
                title: "平安时代：神佛习合的理论化",
                color: "text-purple-700",
                content: `
                    <p class="mb-4"><strong>本地垂迹说（Honji Suijaku）：</strong> 为了调和两者，日本僧侣提出了一套精妙的理论：<br>
                    <span class="block bg-gray-100 p-2 my-2 rounded text-center font-bold">“佛是本体（本地），神是佛在日本的化身（垂迹）。”</span></p>
                    <p class="mb-4">例如，天照大神被视为大日如来的化身。神社内开始建立“神宫寺”，僧侣在神社读经。</p>
                `
            },
            edo: {
                title: "江户时代：行政化的佛教",
                color: "text-yellow-800",
                content: `
                    <p class="mb-4"><strong>檀家制度：</strong> 为了禁绝基督教，幕府强迫所有家庭必须归属某一座佛教寺院（成为檀家），寺院承担了人口普查和葬礼的职能。</p>
                    <p><strong>结果：</strong> 佛教深入平民生活，特别是葬礼仪式（葬式佛教），但其精神性逐渐减弱，行政性增强。</p>
                `
            },
            meiji: {
                title: "明治维新：神佛分离",
                color: "text-indigo-800",
                content: `
                    <p class="mb-4"><strong>神佛分离令 (1868)：</strong> 为了建立以天皇为中心的国家神道，明治政府强行将神道从佛教中剥离。导致了短暂但暴力的“废佛毁释”运动。</p>
                    <p><strong>影响：</strong> 确立了“国家神道”的超宗教地位，直到二战结束。这也是为何今天神社和寺庙在物理上通常是分开的。</p>
                `
            },
            modern: {
                title: "现代：功能性的精神拼贴",
                color: "text-green-700",
                content: `
                    <p class="mb-4"><strong>宗教的私有化：</strong> 战后，宗教信仰自由得到宪法保障。新兴宗教（如创价学会）兴起。</p>
                    <p><strong>现状：</strong> 传统的“家”宗教淡化，人们更多根据需求选择仪式。这种“无宗教信仰但热衷宗教仪式”的状态成为日本社会的常态。</p>
                `
            }
        };

        const lifeData = {
            birth: {
                title: "出生：宫参 (Omiyamairi)",
                content: "婴儿出生后约一个月，父母会带其去当地的神社参拜（产土神）。神道教认为婴儿是神的赐予，参拜是为了感谢神明并祈求孩子健康成长。此时婴儿正式成为社区（氏子）的一员。",
                icon: "⛩️",
                colorClass: "border-red-500 text-red-700"
            },
            wedding: {
                title: "婚礼：白色浪漫",
                content: "现代日本约60%-70%的婚礼是基督教式（教会式）。这通常不涉及信仰皈依，而是因为其时尚、浪漫的氛围（婚纱、圣歌）。仅有不到20%选择传统的神前式婚礼。这体现了对外来文化的审美性接纳。",
                icon: "✝️/⛩️",
                colorClass: "border-blue-500 text-blue-700"
            },
            daily: {
                title: "日常生活：季节的节奏",
                content: "1月1日初诣（神社/寺庙），2月节分（撒豆驱鬼），3月女儿节，8月盂兰盆节（佛教扫墓），12月圣诞节（世俗狂欢），12月31日除夜之钟（佛教）。日本人的日历本身就是多宗教的拼盘。",
                icon: "📅",
                colorClass: "border-yellow-500 text-yellow-700"
            },
            death: {
                title: "死亡：成佛",
                content: "90%以上的日本葬礼采用佛教仪式。死者被授予“戒名”，象征其成为佛弟子，往生极乐世界。神道教视死亡为秽，因此极少举办葬礼。这种“神道管生，佛教管死”的分工极其明确。",
                icon: "⚰️",
                colorClass: "border-gray-500 text-gray-700"
            }
        };

        // --- Charts Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            // Load initial history content
            updateHistory('ancient');
            // Load initial life content (placeholder)
            document.getElementById('life-detail-panel').innerHTML = `
                <div class="text-center w-full">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">点击上方卡片</h3>
                    <p class="text-gray-500">探索日本人一生的宗教轨迹</p>
                </div>
            `;
        });

        function initCharts() {
            // Chart 1: The Numbers Paradox
            const ctxPop = document.getElementById('populationChart').getContext('2d');
            new Chart(ctxPop, {
                type: 'bar',
                data: {
                    labels: ['日本总人口', '宗教信徒总数统计'],
                    datasets: [
                        {
                            label: '人数 (百万)',
                            data: [125, 181], // Approx 125M vs 181M (Shinto ~87M + Buddhism ~83M + Other)
                            backgroundColor: ['#9ca3af', '#b91c1c'],
                            borderWidth: 0,
                            borderRadius: 4
                        },
                        {
                            label: '其中: 神道教',
                            data: [0, 87], // Hidden in first bar, shown in second
                            backgroundColor: '#f87171',
                            stack: 'stack1',
                            hidden: true // Just for legend or tooltip logic if needed, simpler to just show total vs total
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.dataIndex === 1) {
                                        return ['总计: ~1.81亿', '神道教: ~8.7千万', '佛教: ~8.3千万', '基督教/其他: ~1千万'];
                                    }
                                    return context.formattedValue + ' 百万';
                                }
                            }
                        },
                        annotation: {
                            // If annotations plugin existed, we'd add lines. Text context handles this.
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '人数 (百万)' }
                        }
                    }
                }
            });

            // Chart 2: Radar Chart for Influence
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['出生/成长', '社区/庆典', '婚礼/浪漫', '道德/伦理', '死亡/来世', '哲学/冥想'],
                    datasets: [{
                        label: '神道教影响',
                        data: [90, 95, 20, 30, 5, 10],
                        fill: true,
                        backgroundColor: 'rgba(239, 68, 68, 0.2)',
                        borderColor: 'rgb(239, 68, 68)',
                        pointBackgroundColor: 'rgb(239, 68, 68)',
                    }, {
                        label: '佛教影响',
                        data: [10, 20, 5, 40, 95, 90],
                        fill: true,
                        backgroundColor: 'rgba(21, 128, 61, 0.2)',
                        borderColor: 'rgb(21, 128, 61)',
                        pointBackgroundColor: 'rgb(21, 128, 61)',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e5e7eb' },
                            grid: { color: '#e5e7eb' },
                            pointLabels: {
                                font: { size: 11, family: "'Noto Sans SC', sans-serif" }
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        }

        // --- Interaction Logic ---

        function updateHistory(period) {
            // Update buttons
            document.querySelectorAll('#history-section button').forEach(btn => {
                btn.classList.remove('timeline-active', 'bg-red-50', 'border-red-500');
                btn.classList.add('border-transparent');
            });
            const activeBtn = document.getElementById(`btn-${period}`);
            activeBtn.classList.add('timeline-active', 'bg-red-50', 'border-red-500');
            activeBtn.classList.remove('border-transparent');

            // Update Content with animation
            const contentDiv = document.getElementById('history-content');
            contentDiv.style.opacity = '0';
            
            setTimeout(() => {
                const data = historyData[period];
                contentDiv.innerHTML = `
                    <h3 class="text-2xl font-bold ${data.color} mb-4">${data.title}</h3>
                    <div class="text-gray-700 leading-relaxed text-lg">
                        ${data.content}
                    </div>
                `;
                contentDiv.style.opacity = '1';
                contentDiv.style.transition = 'opacity 0.3s ease-in';
            }, 200);
        }

        function showLifeDetail(stage) {
            const data = lifeData[stage];
            const panel = document.getElementById('life-detail-panel');
            
            // Highlight card logic could go here (add class to clicked card)

            panel.innerHTML = `
                <div class="w-full animate-fade-in">
                    <div class="flex items-center mb-4 border-b ${data.colorClass} pb-2" style="border-width: 0 0 2px 0;">
                        <span class="text-3xl mr-3">${data.icon}</span>
                        <h3 class="text-xl font-bold text-gray-800">${data.title}</h3>
                    </div>
                    <p class="text-gray-700 text-lg leading-relaxed">${data.content}</p>
                </div>
            `;
        }

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth' });
            }
        }
    </script>
</body>
</html>
