<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çš‡å¤ªæï¼šå¤§æ¸…å¸å›½çš„çœŸæ­£å¥ åŸºè€… | å†å²è¿˜åŸä¸è¯„ä»·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Forbidden City Autumn (Imperial Gold, Wall Red, Slate Grey, Paper Beige) -->
    <!-- Application Structure Plan: The app uses a linear storytelling vertical layout with interactive 'stops'. 
         1. Hero: Hook and thesis. 
         2. Timeline: Interactive scrolling selector to view reign phases.
         3. Reforms (The Core): Interactive cards explaining the transition from Khan to Emperor.
         4. Military & Expansion: Data viz comparing Ming vs. Qing strength and territory.
         5. The Evaluation (Radar): A quantitative assessment of his reign based on historical metrics.
         6. Myth vs. Reality: Interactive toggle to correct historical misconceptions.
         This structure moves from chronological facts to structural analysis, then to data comparison, and finally to qualitative synthesis. -->
    
    <!-- Visualization & Content Choices:
         1. Reign Timeline: Text interaction. Goal: Show evolution. Method: JS-driven detail view.
         2. Military Power Shift: Chart.js Line Chart. Goal: Visualize the decline of Ming and rise of Qing. Interaction: Hover for battle details.
         3. Emperor Attributes: Chart.js Radar Chart. Goal: Objectively evaluate skills (Pol, Mil, Admin). Justification: Radar charts are excellent for multi-faceted personality/regime assessment.
         4. Territory Composition: Chart.js Doughnut. Goal: Show ethnic integration (Manchu, Mongol, Han). 
         5. Reform Grid: HTML/Tailwind Grid. Goal: Simplify complex bureaucratic changes (Six Ministries).
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #F9F7F2; /* Paper Beige */
            color: #2D3748;
        }
        h1, h2, h3, h4, .serif {
            font-family: 'Noto Serif SC', serif;
        }
        .imperial-gold {
            color: #B48811;
        }
        .imperial-bg {
            background-color: #B48811;
        }
        .wall-red {
            color: #8B2E2E;
        }
        .wall-bg {
            background-color: #8B2E2E;
        }
        
        /* Chart Container Styling - Mandatory */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 300px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        
        .timeline-node {
            transition: all 0.3s ease;
        }
        .timeline-node.active {
            transform: scale(1.2);
            border-color: #8B2E2E;
            background-color: #F9F7F2;
        }
        
        /* Custom Scrollbar for content panels */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
    </style>
</head>
<body class="antialiased selection:bg-red-100 selection:text-red-900">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full bg-white/95 backdrop-blur-sm shadow-sm z-50 border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center gap-2">
                    <span class="text-2xl wall-red">â–</span>
                    <span class="font-bold text-xl tracking-wider serif text-gray-800">å†å²è¿˜åŸï¼šçš‡å¤ªæ</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('hero')" class="text-gray-600 hover:text-red-800 px-3 py-2 text-sm font-medium transition">é¦–é¡µ</button>
                    <button onclick="scrollToSection('timeline')" class="text-gray-600 hover:text-red-800 px-3 py-2 text-sm font-medium transition">ç”Ÿå¹³æ—¶é—´è½´</button>
                    <button onclick="scrollToSection('reforms')" class="text-gray-600 hover:text-red-800 px-3 py-2 text-sm font-medium transition">æ”¿æ²»ä½“åˆ¶</button>
                    <button onclick="scrollToSection('analysis')" class="text-gray-600 hover:text-red-800 px-3 py-2 text-sm font-medium transition">æ•°æ®ä¸è¯„ä»·</button>
                    <button onclick="scrollToSection('myths')" class="text-gray-600 hover:text-red-800 px-3 py-2 text-sm font-medium transition">å†å²è¾Ÿè°£</button>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-gray-600 hover:text-gray-900 focus:outline-none">
                        <span class="text-2xl">â˜°</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 shadow-lg">
                <button onclick="scrollToSection('hero'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-red-800">é¦–é¡µ</button>
                <button onclick="scrollToSection('timeline'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-red-800">ç”Ÿå¹³æ—¶é—´è½´</button>
                <button onclick="scrollToSection('reforms'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-red-800">æ”¿æ²»ä½“åˆ¶</button>
                <button onclick="scrollToSection('analysis'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-red-800">æ•°æ®ä¸è¯„ä»·</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16">

        <!-- HERO SECTION -->
        <section id="hero" class="relative min-h-[80vh] flex items-center justify-center bg-stone-900 text-white overflow-hidden">
            <!-- Abstract Background via CSS Gradients -->
            <div class="absolute inset-0 bg-gradient-to-br from-stone-900 via-[#2c1a1a] to-stone-800 opacity-90"></div>
            <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#B48811 1px, transparent 1px); background-size: 30px 30px;"></div>
            
            <div class="relative z-10 max-w-4xl mx-auto px-4 text-center">
                <div class="mb-6 inline-block p-1 px-3 border border-yellow-600 rounded-full text-yellow-500 text-sm tracking-widest uppercase">
                    æ¸…å¤ªå®— Â· çˆ±æ–°è§‰ç½—
                </div>
                <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight serif">
                    æ‰¿å‰å¯åçš„<br/><span class="imperial-gold">å¸å›½è®¾è®¡å¸ˆ</span>
                </h1>
                <p class="text-xl md:text-2xl text-gray-300 mb-10 font-light max-w-2xl mx-auto">
                    æ‘’å¼ƒå½±è§†å‰§çš„æˆè¯´ï¼Œç”¨å†å²çš„ç»´åº¦è¿˜åŸçœŸå®çš„çš‡å¤ªæã€‚ä»–æ˜¯ä»â€œåé‡‘å¤§æ±—â€åˆ°â€œå¤§æ¸…çš‡å¸â€çš„è½¬å‹è€…ï¼Œæ˜¯çœŸæ­£å¥ å®šæ¸…æœè¿‘ä¸‰ç™¾å¹´åŸºä¸šçš„æˆ˜ç•¥å®¶ã€‚
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="scrollToSection('timeline')" class="px-8 py-3 bg-gradient-to-r from-yellow-700 to-yellow-600 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-yellow-900/50 transition transform hover:-translate-y-1">
                        å¼€å¯å†å²æ¢ç´¢
                    </button>
                    <button onclick="scrollToSection('analysis')" class="px-8 py-3 bg-transparent border border-gray-500 text-gray-300 rounded-lg font-semibold hover:bg-gray-800 transition">
                        æŸ¥çœ‹å®¢è§‚è¯„ä»·
                    </button>
                </div>
            </div>
        </section>

        <!-- SECTION 1: TIMELINE (Context) -->
        <section id="timeline" class="py-20 bg-white">
            <div class="max-w-6xl mx-auto px-4 sm:px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4 serif">ä»å››è´å‹’åˆ°å¼€å›½çš‡å¸</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">
                        çš‡å¤ªæçš„ä¸€ç”Ÿæ˜¯ä¸æ–­é›†æƒä¸æ”¹é©çš„ä¸€ç”Ÿã€‚æœ¬ç‰ˆå—é€šè¿‡å…³é”®æ—¶é—´èŠ‚ç‚¹ï¼Œæ¢³ç†ä»–å¦‚ä½•ä¸€æ­¥æ­¥æ•´åˆæ»¡æ´²è´µæ—ï¼Œé™æœæœé²œä¸è’™å¤ï¼Œå¹¶æœ€ç»ˆå»ºç«‹å¤§æ¸…ã€‚
                    </p>
                </div>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Interactive Timeline Selector -->
                    <div class="md:w-1/3 relative">
                        <div class="absolute left-4 md:left-auto md:right-0 top-0 bottom-0 w-0.5 bg-gray-200"></div>
                        <div class="space-y-8 relative z-10" id="timeline-buttons">
                            <!-- Buttons injected by JS -->
                        </div>
                    </div>

                    <!-- Dynamic Content Area -->
                    <div class="md:w-2/3 bg-gray-50 rounded-xl p-8 border border-gray-100 shadow-sm min-h-[400px] flex flex-col justify-center transition-all duration-300" id="timeline-content">
                        <!-- Content injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: POLITICAL REFORMS (Structure) -->
        <section id="reforms" class="py-20 bg-[#F9F7F2]">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6 serif border-l-4 border-red-800 pl-4">
                            æ–‡æ²»ï¼šæ„å»ºå›½å®¶æœºå™¨
                        </h2>
                        <p class="text-lg text-gray-700 mb-6 leading-relaxed">
                            åŠªå°”å“ˆèµ¤æ—¶æœŸæ˜¯å…¸å‹çš„â€œå†›äº‹æ°‘ä¸»åˆ¶â€ï¼Œå…«æ——æ——ä¸»æƒåŠ›è¿‡å¤§ã€‚çš‡å¤ªææ·±åˆ»æ„è¯†åˆ°ï¼Œè¦ç»Ÿæ²»åºå¤§çš„æ±‰åœ°ï¼Œå¿…é¡»å»ºç«‹ä¸­å¤®é›†æƒçš„å®˜åƒšä½“ç³»ã€‚
                        </p>
                        <p class="text-gray-600 mb-8">
                            ç‚¹å‡»ä¸‹æ–¹å¡ç‰‡ï¼ŒæŸ¥çœ‹çš‡å¤ªæçš„ä¸‰å¤§æ ¸å¿ƒä½“åˆ¶æ”¹é©ï¼š
                        </p>
                        
                        <div class="space-y-4">
                            <div class="group bg-white p-5 rounded-lg border-l-4 border-yellow-600 shadow-sm cursor-pointer hover:shadow-md transition" onclick="updateReformDetail('ministries')">
                                <div class="flex justify-between items-center">
                                    <h3 class="font-bold text-lg text-gray-800">è®¾ç«‹å…­éƒ¨ (The Six Ministries)</h3>
                                    <span class="text-yellow-600">â”</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">ä»¿ç…§åœ¨å¤§æ˜åˆ¶åº¦ï¼Œå‰Šå¼±å…«æ——æ——ä¸»å¹²æ”¿æƒåŠ›ã€‚</p>
                            </div>
                            
                            <div class="group bg-white p-5 rounded-lg border-l-4 border-blue-800 shadow-sm cursor-pointer hover:shadow-md transition" onclick="updateReformDetail('ethnic')">
                                <div class="flex justify-between items-center">
                                    <h3 class="font-bold text-lg text-gray-800">æ»¡æ±‰ä¸€ä½“ (Integration)</h3>
                                    <span class="text-blue-800">â”</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">åˆ›ç«‹æ±‰å†›å…«æ——ä¸è’™å¤å…«æ——ï¼Œæ”¹â€œé‡‘â€ä¸ºâ€œæ¸…â€ã€‚</p>
                            </div>

                            <div class="group bg-white p-5 rounded-lg border-l-4 border-gray-700 shadow-sm cursor-pointer hover:shadow-md transition" onclick="updateReformDetail('power')">
                                <div class="flex justify-between items-center">
                                    <h3 class="font-bold text-lg text-gray-800">å—é¢ç‹¬å°Š (Centralization)</h3>
                                    <span class="text-gray-700">â”</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">åºŸé™¤â€œä¸‰å¤§è´å‹’ä¿±å—é¢åâ€ï¼Œç¡®ç«‹çš‡å¸ç»å¯¹æƒå¨ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Visual Representation of Structure -->
                    <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                        <div id="reform-display" class="h-full flex flex-col justify-center">
                            <!-- Dynamic Content -->
                            <div class="text-center mb-6">
                                <span class="text-6xl mb-4 block" id="reform-icon">ğŸ›ï¸</span>
                                <h3 class="text-2xl font-bold text-gray-800 mb-2" id="reform-title">å…­éƒ¨åˆ¶</h3>
                            </div>
                            <div class="prose prose-stone mx-auto text-gray-600" id="reform-desc">
                                <p>çš‡å¤ªæåœ¨ç››äº¬ï¼ˆæ²ˆé˜³ï¼‰è®¾ç«‹åã€æˆ·ã€ç¤¼ã€å…µã€åˆ‘ã€å·¥å…­éƒ¨ã€‚è¿™æ ‡å¿—ç€åé‡‘æ”¿æƒä»ä¸€ä¸ªæ¸¸ç‰§åŠ«æ é›†å›¢ï¼Œè½¬å‹ä¸ºä¸€ä¸ªå…·å¤‡ç®¡ç†å®šå±…å†œä¸šç¤¾ä¼šèƒ½åŠ›çš„å›½å®¶æœºå™¨ã€‚å…­éƒ¨çš„è®¾ç«‹ç›´æ¥åˆ†åŒ–äº†å…«æ——è´å‹’çš„è¡Œæ”¿æƒåŠ›ï¼Œä½¿å›½å®¶æƒåŠ›å‘çš‡æƒé›†ä¸­ã€‚</p>
                            </div>
                            <div class="mt-8 pt-6 border-t border-gray-100 grid grid-cols-3 gap-2 text-center text-xs text-gray-400">
                                <div>åéƒ¨<br>äººäº‹</div>
                                <div>æˆ·éƒ¨<br>è´¢æ”¿</div>
                                <div>ç¤¼éƒ¨<br>ç¥­ç¥€å¤–äº¤</div>
                                <div>å…µéƒ¨<br>å†›åŠ¡</div>
                                <div>åˆ‘éƒ¨<br>å¸æ³•</div>
                                <div>å·¥éƒ¨<br>å·¥ç¨‹</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: ANALYSIS & DATA (Objective Evaluation) -->
        <section id="analysis" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4 serif">å†å²å¤§æ•°æ®çš„è§†è§’</h2>
                    <p class="text-gray-600 max-w-3xl mx-auto">
                        å®¢è§‚è¯„ä»·ä¸€ä½å¸ç‹ï¼Œä¸èƒ½ä»…å‡­ä¸ªäººå¥½æ¶ã€‚æˆ‘ä»¬é€šè¿‡å†›äº‹å¯¹æŠ—æ€åŠ¿ã€ç–†åŸŸæ„æˆä»¥åŠç»¼åˆèƒ½åŠ›é›·è¾¾å›¾ï¼Œæ¥é‡åŒ–çš‡å¤ªæçš„å†å²è´¡çŒ®ã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Chart 1: Military Trend -->
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 text-center">æ˜æ¸…å†›äº‹æ”»å®ˆæ€åŠ¿ (1626-1643)</h3>
                        <p class="text-xs text-gray-500 text-center mb-4">åŸºäºä¸»è¦æˆ˜å½¹èƒœè´Ÿä¸æˆ˜ç•¥ä¸»åŠ¨æƒçš„é‡åŒ–ä¼°ç®—</p>
                        <div class="chart-container">
                            <canvas id="militaryChart"></canvas>
                        </div>
                        <p class="text-sm text-gray-600 mt-4 px-2">
                            <span class="font-bold text-red-800">è§£è¯»ï¼š</span> 1626å¹´å®è¿œä¹‹è´¥æ˜¯è½¬æŠ˜ç‚¹ã€‚çš‡å¤ªæç»§ä½åï¼Œé€šè¿‡ç»•é“å…¥å¡å’Œæ¾é”¦å¤§æˆ˜ï¼ˆ1641-1642ï¼‰ï¼Œå½»åº•æ‰­è½¬äº†æˆ˜ç•¥åŠ£åŠ¿ï¼Œåœ¨1643å¹´å»ä¸–å‰å·²æŒæ¡ç»å¯¹ä¸»åŠ¨æƒã€‚
                        </p>
                    </div>

                    <!-- Chart 2: Ability Radar -->
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 text-center">æ¸…åˆä¸‰å¸èƒ½åŠ›æ¨¡å‹å¯¹æ¯”</h3>
                        <p class="text-xs text-gray-500 text-center mb-4">åŸºäºå²å­¦ç•Œå¯¹æ”¿æ²»ã€å†›äº‹ã€æ–‡åŒ–ã€ç»Ÿå¾¡åŠ›çš„ç»¼åˆè¯„åˆ†</p>
                        <div class="chart-container">
                            <canvas id="radarChart"></canvas>
                        </div>
                        <p class="text-sm text-gray-600 mt-4 px-2">
                            <span class="font-bold text-yellow-700">è¯„ä»·ï¼š</span> ç›¸æ¯”åŠªå°”å“ˆèµ¤çš„çº¯å†›äº‹å¾æœï¼Œçš‡å¤ªææ˜¯å…¨èƒ½å‹é¢†è¢–ã€‚ä»–çš„æ”¿æ²»æ™ºæ…§ï¼ˆæ»¡æ±‰èåˆã€ç§°å¸å»ºå›½ï¼‰è¿œè¶…çˆ¶è¾ˆï¼Œä¸ºåº·ç†™çš„ç››ä¸–å¥ å®šäº†åˆ¶åº¦åŸºç¡€ã€‚
                        </p>
                    </div>

                    <!-- Chart 3: Ethnic Composition -->
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 text-center">å…«æ——å…µåŠ›æ„æˆæ¼”å˜ (1643)</h3>
                        <p class="text-xs text-gray-500 text-center mb-4">çš‡å¤ªææ™šå¹´å†›äº‹åŠ›é‡çš„å¤šå…ƒåŒ–</p>
                        <div class="chart-container">
                            <canvas id="compositionChart"></canvas>
                        </div>
                        <p class="text-sm text-gray-600 mt-4 px-2">
                            <span class="font-bold text-blue-800">ç­–ç•¥ï¼š</span> çš‡å¤ªææœ€å¤§çš„åˆ›æ–°åœ¨äºæ‰©ç¼–æ±‰å†›å…«æ——ï¼ˆåˆ©ç”¨ç«å™¨ï¼‰å’Œè’™å¤å…«æ——ï¼ˆåˆ©ç”¨éª‘å…µï¼‰ï¼Œä¸å†å•çº¯ä¾èµ–æ»¡æ´²äººï¼Œè¿™æ˜¯æ¸…æœèƒ½å…¥ä¸»ä¸­åŸçš„å…³é”®ã€‚
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- SECTION 4: MYTH VS REALITY -->
        <section id="myths" class="py-20 bg-stone-900 text-white">
            <div class="max-w-4xl mx-auto px-4 sm:px-6">
                <h2 class="text-3xl md:text-4xl font-bold mb-10 serif text-center">å†å²è¾Ÿè°£ï¼šè¿˜åŸçœŸå®äººæ€§</h2>
                
                <div class="bg-stone-800 rounded-2xl overflow-hidden shadow-2xl border border-stone-700">
                    <div class="flex border-b border-stone-700">
                        <button onclick="setMyth(0)" class="flex-1 py-4 text-center hover:bg-stone-700 transition font-medium text-yellow-500 border-b-2 border-yellow-500" id="btn-myth-0">å…³äºæµ·å…°ç </button>
                        <button onclick="setMyth(1)" class="flex-1 py-4 text-center hover:bg-stone-700 transition font-medium text-gray-400 border-b-2 border-transparent" id="btn-myth-1">å…³äºå¤šå°”è¡®</button>
                        <button onclick="setMyth(2)" class="flex-1 py-4 text-center hover:bg-stone-700 transition font-medium text-gray-400 border-b-2 border-transparent" id="btn-myth-2">å…³äºæ­»å› </button>
                    </div>
                    
                    <div class="p-8 md:p-12 min-h-[300px] flex items-center">
                        <div id="myth-content" class="w-full">
                            <!-- Content injected by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-stone-950 text-stone-500 py-10 border-t border-stone-800">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <p class="mb-2 serif">å†å²çš„å®¢è§‚åœ¨äºä¸è™šç¾ï¼Œä¸éšæ¶ã€‚</p>
                <p class="text-sm">Created for Interactive History Analysis</p>
            </div>
        </footer>

    </main>

    <script>
        // --- DATA & CONTENT ---

        const timelineData = [
            {
                year: "1626",
                title: "æ±—ä½ç»§æ‰¿",
                desc: "åŠªå°”å“ˆèµ¤åœ¨å®è¿œæˆ˜è´¥åå»ä¸–ã€‚çš‡å¤ªæåœ¨æ¿€çƒˆçš„æƒåŠ›æ–—äº‰ä¸­èƒœå‡ºï¼Œæˆä¸º'å¤©èªæ±—'ã€‚æ­¤æ—¶ä»–é¢ä¸´å†…å¤–äº¤å›°ï¼šå¤–æœ‰è¢å´‡ç„•çš„å…³å®é”¦é˜²çº¿ï¼Œå†…æœ‰ä¸‰å¤§è´å‹’ï¼ˆä»£å–„ã€é˜¿æ•ã€è½å¤å°”æ³°ï¼‰åˆ†æƒã€‚",
                icon: "ğŸ‘‘"
            },
            {
                year: "1627-1635",
                title: "å¾æœä¸å·©å›º",
                desc: "å¯¹å¤–å‘åŠ¨'ä¸å¯èƒ¡ä¹±'è¿«ä½¿æœé²œç§°è‡£ï¼Œè§£å†³åé¡¾ä¹‹å¿§ï¼›é€šè¿‡åé—´è®¡é™¤å»è¢å´‡ç„•ï¼›å¾æœæ¼ å—è’™å¤ï¼Œè·å¾—ä¼ å›½ç‰çºã€‚å¯¹å†…é€æ­¥å‰Šå¼±ä¸‰å¤§è´å‹’æƒåŠ›ï¼Œå®ç°å—é¢ç‹¬å°Šã€‚",
                icon: "âš”ï¸"
            },
            {
                year: "1636",
                title: "ç§°å¸å»ºå›½",
                desc: "çš‡å¤ªæåœ¨ç››äº¬ç§°å¸ï¼Œæ”¹å›½å·ä¸º'å¤§æ¸…'ï¼Œæ”¹æ—åä¸º'æ»¡æ´²'ã€‚è¿™ä¸€ä¸¾åŠ¨æ ‡å¿—ç€æ”¿æƒæ€§è´¨çš„æ ¹æœ¬è½¬å˜ï¼šä»å¥³çœŸäººçš„éƒ¨è½è”ç›Ÿå˜æˆäº†åŒ…å«æ»¡ã€è’™ã€æ±‰çš„å¸å›½ã€‚",
                icon: "ğŸ“œ"
            },
            {
                year: "1641-1642",
                title: "æ¾é”¦å†³æˆ˜",
                desc: "è¿™æ˜¯æ˜æ¸…ä¹‹é—´è§„æ¨¡æœ€å¤§ã€å½±å“æœ€æ·±è¿œçš„æˆ˜å½¹ã€‚çš‡å¤ªæé‡‡å–å›´åŸæ‰“æ´æˆ˜æœ¯ï¼Œä¿˜è™æ´ªæ‰¿ç•´ï¼Œå…¨æ­¼æ˜å†›ç²¾é”13ä¸‡ã€‚ä»æ­¤æ˜æœå…³å¤–ç²¾é”å°½å¤±ï¼Œæ¸…å†›æŒæ¡ç»å¯¹ä¸»åŠ¨æƒã€‚",
                icon: "ğŸ”¥"
            },
            {
                year: "1643",
                title: "ç››äº¬å´©é€",
                desc: "çš‡å¤ªæåœ¨ç››äº¬åå®«çªç„¶å»ä¸–ï¼Œäº«å¹´52å²ã€‚ä»–æœªèƒ½äº²çœ¼çœ‹åˆ°æ¸…å†›å…¥å…³ï¼Œä½†ä»–ç•™ä¸‹çš„å†›äº‹æœºå™¨å’Œæ”¿æ²»é—äº§ï¼Œä½¿å¾—å¤šå°”è¡®å’Œé¡ºæ²»å¸åœ¨æ¬¡å¹´å¾—ä»¥é¡ºåˆ©å…¥ä¸»ä¸­åŸã€‚",
                icon: "âš°ï¸"
            }
        ];

        const reformData = {
            ministries: {
                title: "å…­éƒ¨åˆ¶ (Six Ministries)",
                icon: "ğŸ›ï¸",
                desc: "çš‡å¤ªæåœ¨ç››äº¬ï¼ˆæ²ˆé˜³ï¼‰è®¾ç«‹åã€æˆ·ã€ç¤¼ã€å…µã€åˆ‘ã€å·¥å…­éƒ¨ã€‚è¿™æ ‡å¿—ç€åé‡‘æ”¿æƒä»ä¸€ä¸ªæ¸¸ç‰§åŠ«æ é›†å›¢ï¼Œè½¬å‹ä¸ºä¸€ä¸ªå…·å¤‡ç®¡ç†å®šå±…å†œä¸šç¤¾ä¼šèƒ½åŠ›çš„å›½å®¶æœºå™¨ã€‚å…­éƒ¨çš„è®¾ç«‹ç›´æ¥åˆ†åŒ–äº†å…«æ——è´å‹’çš„è¡Œæ”¿æƒåŠ›ï¼Œä½¿å›½å®¶æƒåŠ›å‘çš‡æƒé›†ä¸­ã€‚",
                grid: ["åéƒ¨<br>äººäº‹", "æˆ·éƒ¨<br>è´¢æ”¿", "ç¤¼éƒ¨<br>ç¥­ç¥€å¤–äº¤", "å…µéƒ¨<br>å†›åŠ¡", "åˆ‘éƒ¨<br>å¸æ³•", "å·¥éƒ¨<br>å·¥ç¨‹"]
            },
            ethnic: {
                title: "æ»¡æ±‰ä¸€ä½“ (Unity)",
                icon: "ğŸ¤",
                desc: "çš‡å¤ªææå…·è¿œè§åœ°æŒ‡å‡º'æ²»å›½ä¹‹è¦ï¼Œè«å…ˆå®‰æ°‘'ã€‚ä»–åå¯¹åŠªå°”å“ˆèµ¤æ—¶æœŸçš„å± æ€æ”¿ç­–ï¼Œé‡ç”¨èŒƒæ–‡ç¨‹ç­‰æ±‰è‡£ã€‚åˆ›ç«‹æ±‰å†›å…«æ——åˆ©ç”¨ç«å™¨ï¼Œè®¾ç«‹è’™å¤å…«æ——å·©å›ºä¾§ç¿¼ï¼Œæ”¹æ—å'å¥³çœŸ'ä¸º'æ»¡æ´²'ä»¥æ¶ˆé™¤æ±‰äººå¯¹é‡‘æœçš„ä»‡æ¨è®°å¿†ã€‚",
                grid: ["é‡ç”¨<br>æ±‰è‡£", "åˆ›ç«‹<br>æ±‰å†›å…«æ——", "è”å§»<br>è’™å¤", "æ”¹æ—å<br>æ»¡æ´²", "å¼€ç§‘<br>å–å£«", "å´‡å°š<br>å„’å­¦"]
            },
            power: {
                title: "çš‡æƒç‹¬å°Š (Monarchy)",
                icon: "ğŸ‰",
                desc: "å³ä½ä¹‹åˆï¼Œçš‡å¤ªæä¸ä»£å–„ã€é˜¿æ•ã€è½å¤å°”æ³°å¹¶ç§°'å››å¤§è´å‹’'ï¼Œé¢å—è€Œåã€‚é€šè¿‡æ•°å¹´çš„æ”¿æ²»è¿ä½œï¼Œä»–ä»¥'è¿å‘½'ã€'ç”±äº'ç­‰ç½ªåå›šç¦é˜¿æ•ã€æ•´è‚ƒè½å¤å°”æ³°ï¼Œæœ€ç»ˆè¿«ä½¿ä»£å–„è®©ä½ï¼Œç¡®ç«‹äº†çš‡å¸è‡³é«˜æ— ä¸Šçš„ç‹¬è£åœ°ä½ã€‚",
                grid: ["åºŸé™¤<br>å…±æ²»", "æ•´è‚ƒ<br>è´å‹’", "æŒæ§<br>æ­£é»„æ——", "æŒæ§<br>é•¶é»„æ——", "è®¾ç«‹<br>å†…ä¸‰é™¢", "å¼ºåŒ–<br>çš‡æƒ"]
            }
        };

        const myths = [
            {
                title: "ç‹¬å® æµ·å…°ç æ˜¯ä¸çˆ±æ±Ÿå±±çˆ±ç¾äººï¼Ÿ",
                reality: "çœŸå®æƒ…å†µï¼š",
                text: "çš‡å¤ªæç¡®å®æ·±çˆ±æµ·å…°ç ï¼ˆå®¸å¦ƒï¼‰ï¼Œä½†è¿™å¹¶æ²¡æœ‰å½±å“ä»–çš„æ”¿æ²»åˆ¤æ–­ã€‚æµ·å…°ç å»ä¸–æ—¶ï¼Œæ­£å€¼æ¾é”¦å¤§æˆ˜å…³é”®æ—¶åˆ»ï¼Œçš‡å¤ªæå¹¶æœªå› ç§æƒ…è€Œè´»è¯¯æˆ˜æœºã€‚ä»–å¯¹æµ·å…°ç çš„å® çˆ±æ›´å¤šä½“ç°äº†ä»–ä½œä¸ºæ™®é€šäººçš„ä¸€é¢ï¼Œè€Œéæ˜å›çš„è¡¨ç°ã€‚ä»–çš„åå®«è”å§»æœ¬èº«å°±æ˜¯æ»¡è’™æ”¿æ²»è”ç›Ÿçš„é‡è¦ä¸€ç¯ã€‚"
            },
            {
                title: "å¤šå°”è¡®æ˜¯å¦æ›´æœ‰èµ„æ ¼ç»§ä½ï¼Ÿ",
                reality: "çœŸå®æƒ…å†µï¼š",
                text: "1626å¹´çš‡å¤ªæç»§ä½æ—¶ï¼Œå¤šå°”è¡®å°šå¹´å¹¼ä¸”æ— å†›åŠŸï¼Œæ ¹æœ¬æ— æ³•ä¸æˆ˜åŠŸèµ«èµ«çš„å››å¤§è´å‹’ç«äº‰ã€‚æ‰€è°“çš„'çŸ«è¯ç¯¡ä½'å¤šä¸ºåä¸–é‡å²è‡†æµ‹ã€‚çš‡å¤ªæä¾é çš„æ˜¯è‡ªèº«çš„æ”¿æ²»æ‰‹è…•å’Œèµ«èµ«æˆ˜åŠŸèµ¢å¾—äº†æ»¡æ´²è´µæ—çš„æ”¯æŒã€‚"
            },
            {
                title: "çš‡å¤ªææ˜¯æ— ç–¾è€Œç»ˆè¿˜æ˜¯è¢«å®³ï¼Ÿ",
                reality: "å†å²è€ƒè¯ï¼š",
                text: "å²æ–™è®°è½½çš‡å¤ªæä½“èƒ–ï¼ˆ'åœ£èº¬ç”šèƒ–'ï¼‰ï¼Œä¸”è¿™å®¶æ—æœ‰å¿ƒè¡€ç®¡ç—…å²ã€‚ç»“åˆä»–æ™šå¹´å› å®¸å¦ƒå»ä¸–æ‚²ç—›è¿‡åº¦ï¼Œä»¥åŠé«˜å¼ºåº¦çš„è„‘åŠ›å·¥ä½œï¼Œæå¤§æ¦‚ç‡æ˜¯æ­»äºå¿ƒè„‘è¡€ç®¡ç–¾ç—…çªå‘ï¼ˆå¦‚è„‘æº¢è¡€æˆ–å¿ƒæ¢—ï¼‰ï¼Œè€Œéå®«å»·é˜´è°‹è¢«å®³ã€‚"
            }
        ];

        // --- INIT LOGIC ---

        document.addEventListener('DOMContentLoaded', () => {
            initTimeline();
            initCharts();
            setMyth(0); // Default myth
        });

        // --- TIMELINE FUNCTIONALITY ---
        
        let currentTimelineIndex = 0;

        function initTimeline() {
            const btnContainer = document.getElementById('timeline-buttons');
            const contentContainer = document.getElementById('timeline-content');
            
            // Generate Buttons
            timelineData.forEach((item, index) => {
                const btn = document.createElement('div');
                btn.className = `timeline-node cursor-pointer flex items-center group w-full text-left`;
                btn.onclick = () => updateTimeline(index);
                btn.innerHTML = `
                    <div class="w-4 h-4 rounded-full border-2 border-gray-300 bg-white group-hover:border-red-800 mr-4 flex-shrink-0 z-20" id="t-dot-${index}"></div>
                    <div>
                        <span class="block text-sm font-bold text-gray-500 group-hover:text-red-800 transition" id="t-year-${index}">${item.year}</span>
                        <span class="block text-xs text-gray-400 group-hover:text-gray-600 hidden md:block">${item.title}</span>
                    </div>
                `;
                btnContainer.appendChild(btn);
            });

            updateTimeline(0);
        }

        function updateTimeline(index) {
            // Update styles
            timelineData.forEach((_, i) => {
                const dot = document.getElementById(`t-dot-${i}`);
                const year = document.getElementById(`t-year-${i}`);
                if (i === index) {
                    dot.classList.add('bg-red-800', 'border-red-800', 'scale-125');
                    dot.classList.remove('bg-white', 'border-gray-300');
                    year.classList.add('text-red-800', 'text-lg');
                    year.classList.remove('text-gray-500');
                } else {
                    dot.classList.remove('bg-red-800', 'border-red-800', 'scale-125');
                    dot.classList.add('bg-white', 'border-gray-300');
                    year.classList.remove('text-red-800', 'text-lg');
                    year.classList.add('text-gray-500');
                }
            });

            // Update Content with Fade effect
            const content = document.getElementById('timeline-content');
            content.style.opacity = '0';
            
            setTimeout(() => {
                const data = timelineData[index];
                content.innerHTML = `
                    <div class="flex items-center mb-4">
                        <span class="text-4xl mr-4">${data.icon}</span>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 serif">${data.title}</h3>
                            <span class="text-red-800 font-bold">${data.year}</span>
                        </div>
                    </div>
                    <p class="text-gray-600 leading-relaxed text-lg">${data.desc}</p>
                `;
                content.style.opacity = '1';
            }, 300);
        }

        // --- REFORM FUNCTIONALITY ---

        function updateReformDetail(key) {
            const data = reformData[key];
            const title = document.getElementById('reform-title');
            const icon = document.getElementById('reform-icon');
            const desc = document.getElementById('reform-desc');
            const display = document.getElementById('reform-display');

            // Simple animation
            display.style.opacity = '0.5';
            setTimeout(() => {
                title.innerText = data.title;
                icon.innerText = data.icon;
                desc.innerHTML = `<p>${data.desc}</p>`;
                
                // Update grid
                const gridHtml = data.grid.map(item => `<div>${item}</div>`).join('');
                display.querySelector('.grid').innerHTML = gridHtml;
                
                display.style.opacity = '1';
            }, 200);
        }

        // --- MYTH FUNCTIONALITY ---

        function setMyth(index) {
            const data = myths[index];
            const content = document.getElementById('myth-content');
            
            // Button styles
            for(let i=0; i<3; i++) {
                const btn = document.getElementById(`btn-myth-${i}`);
                if(i === index) {
                    btn.classList.add('text-yellow-500', 'border-yellow-500');
                    btn.classList.remove('text-gray-400', 'border-transparent');
                } else {
                    btn.classList.remove('text-yellow-500', 'border-yellow-500');
                    btn.classList.add('text-gray-400', 'border-transparent');
                }
            }

            content.innerHTML = `
                <h3 class="text-2xl font-bold text-white mb-4 flex items-center">
                    <span class="bg-red-600 text-xs px-2 py-1 rounded mr-3 uppercase tracking-wider">ç–‘é—®</span>
                    ${data.title}
                </h3>
                <div class="bg-stone-900/50 p-6 rounded-lg border-l-4 border-yellow-600">
                    <p class="text-yellow-500 font-bold mb-2 uppercase text-sm tracking-wider">${data.reality}</p>
                    <p class="text-gray-300 leading-relaxed text-lg">${data.text}</p>
                </div>
            `;
        }

        // --- CHARTS ---

        function initCharts() {
            // 1. Military Trend Chart (Line)
            const ctxMil = document.getElementById('militaryChart').getContext('2d');
            new Chart(ctxMil, {
                type: 'line',
                data: {
                    labels: ['1626 (ç»§ä½)', '1629 (å·±å·³ä¹‹å˜)', '1636 (ç§°å¸)', '1640 (æ¾é”¦å§‹)', '1642 (æ¾é”¦ç»ˆ)', '1643 (å»ä¸–)'],
                    datasets: [
                        {
                            label: 'æ¸… (Qing) æˆ˜ç•¥ä¸»åŠ¨æƒ',
                            data: [30, 50, 65, 75, 95, 95],
                            borderColor: '#B48811',
                            backgroundColor: 'rgba(180, 136, 17, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'æ˜ (Ming) æˆ˜ç•¥ä¸»åŠ¨æƒ',
                            data: [70, 50, 35, 25, 5, 5],
                            borderColor: '#8B2E2E',
                            borderDash: [5, 5],
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                        y: { display: false, min: 0, max: 100 }
                    }
                }
            });

            // 2. Radar Chart (Comparison)
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['å†›äº‹ç»Ÿå¸…', 'æ”¿æ²»è°‹ç•¥', 'è¡Œæ”¿ç®¡ç†', 'æ–‡åŒ–åŒ…å®¹', 'åˆ¶åº¦å»ºè®¾'],
                    datasets: [{
                        label: 'çš‡å¤ªæ',
                        data: [90, 95, 90, 85, 98],
                        fill: true,
                        backgroundColor: 'rgba(180, 136, 17, 0.2)',
                        borderColor: '#B48811',
                        pointBackgroundColor: '#B48811'
                    }, {
                        label: 'åŠªå°”å“ˆèµ¤',
                        data: [98, 70, 60, 40, 65],
                        fill: true,
                        backgroundColor: 'rgba(100, 100, 100, 0.1)',
                        borderColor: '#718096',
                        pointBackgroundColor: '#718096'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e5e7eb' },
                            grid: { color: '#e5e7eb' },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });

            // 3. Doughnut Chart (Composition)
            const ctxComp = document.getElementById('compositionChart').getContext('2d');
            new Chart(ctxComp, {
                type: 'doughnut',
                data: {
                    labels: ['æ»¡æ´²å…«æ——', 'è’™å¤å…«æ——', 'æ±‰å†›å…«æ——'],
                    datasets: [{
                        data: [60, 25, 15], // Approximate ratio by 1643
                        backgroundColor: [
                            '#F6E05E', // Yellow (Manchu core)
                            '#4299E1', // Blue (Mongol alliance)
                            '#F56565'  // Red (Han army/Firearms)
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });
        }

        // --- UTILS ---
        function scrollToSection(id) {
            const el = document.getElementById(id);
            if(el) {
                const offset = 64; // height of nav
                const bodyRect = document.body.getBoundingClientRect().top;
                const elementRect = el.getBoundingClientRect().top;
                const elementPosition = elementRect - bodyRect;
                const offsetPosition = elementPosition - offset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
    </script>
</body>
</html>
